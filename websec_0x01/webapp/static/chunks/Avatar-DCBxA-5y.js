import{r as t,ak as e,P as r,al as n,am as i,an as o,R as a,y as c,ao as s,L as l,ad as u,ap as f,aq as p,O as d,ar as v,as as h,V as y,at as m,a5 as g,au as b,av as w,H as O,J as S,aw as k,U as j,ax as x,j as P,t as A,p as z,q as C,c as E,v as T,_ as N,w as R,z as D,l as I}from"../tasks/a3_nosql_injection.js";import{c as B}from"./createSvgIcon-BS81KknK.js";function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e,r){var n;return n=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==H(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,c=[],s=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(u){l=!0,i=u}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var F=t.forwardRef((function(s,l){var u=s.aspect,f=s.initialDimension,p=void 0===f?{width:-1,height:-1}:f,d=s.width,v=void 0===d?"100%":d,h=s.height,y=void 0===h?"100%":h,m=s.minWidth,g=void 0===m?0:m,b=s.minHeight,w=s.maxHeight,O=s.children,S=s.debounce,k=void 0===S?0:S,j=s.id,x=s.className,P=s.onResize,A=s.style,z=void 0===A?{}:A,C=t.useRef(null),E=t.useRef();E.current=P,t.useImperativeHandle(l,(function(){return Object.defineProperty(C.current,"current",{get:function(){return C.current},configurable:!0})}));var T=_(t.useState({containerWidth:p.width,containerHeight:p.height}),2),N=T[0],R=T[1],D=t.useCallback((function(t,e){R((function(r){var n=Math.round(t),i=Math.round(e);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}}))}),[]);t.useEffect((function(){var t=function(t){var e,r=t[0].contentRect,n=r.width,i=r.height;D(n,i),null===(e=E.current)||void 0===e||e.call(E,n,i)};k>0&&(t=e(t,k,{trailing:!0,leading:!1}));var r=new ResizeObserver(t),n=C.current.getBoundingClientRect(),i=n.width,o=n.height;return D(i,o),r.observe(C.current),function(){r.disconnect()}}),[D,k]);var I=t.useMemo((function(){var e=N.containerWidth,c=N.containerHeight;if(e<0||c<0)return null;r(n(v)||n(y),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",v,y),r(!u||u>0,"The aspect(%s) must be greater than zero.",u);var s=n(v)?e:v,l=n(y)?c:y;u&&u>0&&(s?l=s/u:l&&(s=l*u),w&&l>w&&(l=w)),r(s>0||l>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",s,l,v,y,g,b,u);var f=!Array.isArray(O)&&i.isElement(O)&&o(O.type).endsWith("Chart");return a.Children.map(O,(function(e){return i.isElement(e)?t.cloneElement(e,L({width:s,height:l},f?{style:L({height:"100%",width:"100%",maxHeight:l,maxWidth:s},e.props.style)}:{})):e}))}),[u,O,y,w,b,g,N,v]);return a.createElement("div",{id:j?"".concat(j):void 0,className:c("recharts-responsive-container",x),style:L(L({},z),{},{width:v,height:y,minWidth:g,minHeight:b,maxHeight:w}),ref:C},I)}));function J(t,e,r){if(e<1)return[];if(1===e&&void 0===r)return t;for(var n=[],i=0;i<t.length;i+=e){if(void 0!==r&&!0!==r(t[i]))return;n.push(t[i])}return n}function $(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){var n;return n=function(t,e){if("object"!=q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==q(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,c=t.orientation,v=t.interval,h=t.tickFormatter,y=t.unit,m=t.angle;if(!i||!i.length||!n)return[];if(l(v)||u.isSsr)return function(t,e){return J(t,e+1)}(i,"number"==typeof v&&l(v)?v:0);var g=[],b="top"===c||"bottom"===c?"width":"height",w=y&&"width"===b?f(y,{fontSize:e,letterSpacing:r}):{width:0,height:0},O=function(t,n){var i=d(h)?h(t.value,n):t.value;return"width"===b?function(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return s(n,r)}(f(i,{fontSize:e,letterSpacing:r}),w,m):f(i,{fontSize:e,letterSpacing:r})[b]},S=i.length>=2?p(i[1].coordinate-i[0].coordinate):1,k=function(t,e,r){var n="width"===r,i=t.x,o=t.y,a=t.width,c=t.height;return 1===e?{start:n?i:o,end:n?i+a:o+c}:{start:n?i+a:o+c,end:n?i:o}}(o,S,b);return"equidistantPreserveStart"===v?function(t,e,r,n,i){for(var o,a=(n||[]).slice(),c=e.start,s=e.end,l=0,u=1,f=c,p=function(){var e=null==n?void 0:n[l];if(void 0===e)return{v:J(n,u)};var o,a=l,p=function(){return void 0===o&&(o=r(e,a)),o},d=e.coordinate,v=0===l||$(t,d,p,f,s);v||(l=0,f=c,u+=1),v&&(f=d+t*(p()/2+i),l+=u)};u<=a.length;)if(o=p())return o.v;return[]}(S,k,O,i,a):(g="preserveStart"===v||"preserveStartEnd"===v?function(t,e,r,n,i,o){var a=(n||[]).slice(),c=a.length,s=e.start,l=e.end;if(o){var u=n[c-1],f=r(u,c-1),p=t*(u.coordinate+t*f/2-l);a[c-1]=u=U(U({},u),{},{tickCoord:p>0?u.coordinate-p*t:u.coordinate}),$(t,u.tickCoord,(function(){return f}),s,l)&&(l=u.tickCoord-t*(f/2+i),a[c-1]=U(U({},u),{},{isShow:!0}))}for(var d=o?c-1:c,v=function(e){var n,o=a[e],c=function(){return void 0===n&&(n=r(o,e)),n};if(0===e){var u=t*(o.coordinate-t*c()/2-s);a[e]=o=U(U({},o),{},{tickCoord:u<0?o.coordinate-u*t:o.coordinate})}else a[e]=o=U(U({},o),{},{tickCoord:o.coordinate});$(t,o.tickCoord,c,s,l)&&(s=o.tickCoord+t*(c()/2+i),a[e]=U(U({},o),{},{isShow:!0}))},h=0;h<d;h++)v(h);return a}(S,k,O,i,a,"preserveStartEnd"===v):function(t,e,r,n,i){for(var o=(n||[]).slice(),a=o.length,c=e.start,s=e.end,l=function(e){var n,l=o[e],u=function(){return void 0===n&&(n=r(l,e)),n};if(e===a-1){var f=t*(l.coordinate+t*u()/2-s);o[e]=l=U(U({},l),{},{tickCoord:f>0?l.coordinate-f*t:l.coordinate})}else o[e]=l=U(U({},l),{},{tickCoord:l.coordinate});$(t,l.tickCoord,u,c,s)&&(s=l.tickCoord-t*(u()/2+i),o[e]=U(U({},l),{},{isShow:!0}))},u=a-1;u>=0;u--)l(u);return o}(S,k,O,i,a),g.filter((function(t){return t.isShow})))}var K=["viewBox"],Q=["viewBox"],Z=["ticks"];function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},et.apply(this,arguments)}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){ut(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function at(t,e,r){return e=st(e),function(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ct()?Reflect.construct(e,r||[],st(t).constructor):e.apply(t,r))}function ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ct=function(){return!!t})()}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ut(t,e,r){return(e=ft(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:String(e)}var pt=function(e){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=at(this,r,[t])).state={fontSize:"",letterSpacing:""},e}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(r,t.Component),n=r,o=[{key:"renderTickItem",value:function(t,e,r){return a.isValidElement(t)?a.cloneElement(t,e):d(t)?t(e):a.createElement(v,et({},e,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(i=[{key:"shouldComponentUpdate",value:function(t,e){var r=t.viewBox,n=it(t,K),i=this.props,o=i.viewBox,a=it(i,Q);return!h(r,o)||!h(n,a)||!h(e,this.state)}},{key:"componentDidMount",value:function(){var t=this.layerReference;if(t){var e=t.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];e&&this.setState({fontSize:window.getComputedStyle(e).fontSize,letterSpacing:window.getComputedStyle(e).letterSpacing})}}},{key:"getTickLineCoord",value:function(t){var e,r,n,i,o,a,c=this.props,s=c.x,u=c.y,f=c.width,p=c.height,d=c.orientation,v=c.tickSize,h=c.mirror,y=c.tickMargin,m=h?-1:1,g=t.tickSize||v,b=l(t.tickCoord)?t.tickCoord:t.coordinate;switch(d){case"top":e=r=t.coordinate,a=(n=(i=u+ +!h*p)-m*g)-m*y,o=b;break;case"left":n=i=t.coordinate,o=(e=(r=s+ +!h*f)-m*g)-m*y,a=b;break;case"right":n=i=t.coordinate,o=(e=(r=s+ +h*f)+m*g)+m*y,a=b;break;default:e=r=t.coordinate,a=(n=(i=u+ +h*p)+m*g)+m*y,o=b}return{line:{x1:e,y1:n,x2:r,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var t,e=this.props,r=e.orientation,n=e.mirror;switch(r){case"left":t=n?"start":"end";break;case"right":t=n?"end":"start";break;default:t="middle"}return t}},{key:"getTickVerticalAnchor",value:function(){var t=this.props,e=t.orientation,r=t.mirror,n="end";switch(e){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var t=this.props,e=t.x,r=t.y,n=t.width,i=t.height,o=t.orientation,s=t.mirror,l=t.axisLine,u=nt(nt(nt({},y(this.props,!1)),y(l,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var f=+("top"===o&&!s||"bottom"===o&&s);u=nt(nt({},u),{},{x1:e,y1:r+f*i,x2:e+n,y2:r+f*i})}else{var p=+("left"===o&&!s||"right"===o&&s);u=nt(nt({},u),{},{x1:e+p*n,y1:r,x2:e+p*n,y2:r+i})}return a.createElement("line",et({},u,{className:c("recharts-cartesian-axis-line",m(l,"className"))}))}},{key:"renderTicks",value:function(t,e,n){var i=this,o=this.props,s=o.tickLine,l=o.stroke,u=o.tick,f=o.tickFormatter,p=o.unit,v=Y(nt(nt({},this.props),{},{ticks:t}),e,n),h=this.getTickTextAnchor(),w=this.getTickVerticalAnchor(),O=y(this.props,!1),S=y(u,!1),k=nt(nt({},O),{},{fill:"none"},y(s,!1)),j=v.map((function(t,e){var n=i.getTickLineCoord(t),o=n.line,y=n.tick,j=nt(nt(nt(nt({textAnchor:h,verticalAnchor:w},O),{},{stroke:"none",fill:l},S),y),{},{index:e,payload:t,visibleTicksCount:v.length,tickFormatter:f});return a.createElement(g,et({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},b(i.props,t,e)),s&&a.createElement("line",et({},k,o,{className:c("recharts-cartesian-axis-tick-line",m(s,"className"))})),u&&r.renderTickItem(u,j,"".concat(d(f)?f(t.value,e):t.value).concat(p||"")))}));return a.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var t=this,e=this.props,r=e.axisLine,n=e.width,i=e.height,o=e.ticksGenerator,s=e.className;if(e.hide)return null;var l=this.props,u=l.ticks,f=it(l,Z),p=u;return d(o)&&(p=u&&u.length>0?o(this.props):o(f)),n<=0||i<=0||!p||!p.length?null:a.createElement(g,{className:c("recharts-cartesian-axis",s),ref:function(e){t.layerReference=e}},r&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),w.renderCallByParent(this.props))}}])&&ot(n.prototype,i),o&&ot(n,o),Object.defineProperty(n,"prototype",{writable:!1}),r}();function dt(){return dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dt.apply(this,arguments)}ut(pt,"displayName","CartesianAxis"),ut(pt,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var vt=function(t){var e=t.xAxisId,r=O(),n=S(),i=k(e);return null==i?null:a.createElement(pt,dt({},i,{className:c("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(t){return j(t,!0)}}))};function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ht.apply(this,arguments)}vt.displayName="XAxis",vt.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var yt=function(t){var e=t.yAxisId,r=O(),n=S(),i=x(e);return null==i?null:a.createElement(pt,ht({},i,{className:c("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(t){return j(t,!0)}}))};yt.displayName="YAxis",yt.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};const mt=B(P.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function gt(t){return A("MuiAvatar",t)}z("MuiAvatar",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","fallback","sizeSm","sizeMd","sizeLg","img","variantOutlined","variantSoft","variantSolid"]);const bt=t.createContext(void 0);C("div",{name:"JoyAvatarGroup",slot:"Root",overridesResolver:(t,e)=>e.root})((({ownerState:t,theme:e})=>E({},"sm"===t.size&&{"--AvatarGroup-gap":"-0.375rem","--Avatar-ringSize":"2px"},"md"===t.size&&{"--AvatarGroup-gap":"-0.5rem","--Avatar-ringSize":"2px"},"lg"===t.size&&{"--AvatarGroup-gap":"-0.625rem","--Avatar-ringSize":"4px"},{"--Avatar-ring":`0 0 0 var(--Avatar-ringSize) var(--Avatar-ringColor, ${e.vars.palette.background.surface})`,"--Avatar-marginInlineStart":"var(--AvatarGroup-gap)",display:"flex",marginInlineStart:"calc(-1 * var(--AvatarGroup-gap))"})));const wt=["alt","color","size","variant","src","srcSet","children","component","slots","slotProps"],Ot=C("div",{name:"JoyAvatar",slot:"Root",overridesResolver:(t,e)=>e.root})((({theme:t,ownerState:e})=>{var r;return E({"--Icon-color":"neutral"!==e.color||"solid"===e.variant?"currentColor":t.vars.palette.text.icon},t.typography[`title-${e.size}`],"sm"===e.size&&{width:"var(--Avatar-size, 2rem)",height:"var(--Avatar-size, 2rem)",fontSize:"calc(var(--Avatar-size, 2rem) * 0.4375)"},"md"===e.size&&{width:"var(--Avatar-size, 2.5rem)",height:"var(--Avatar-size, 2.5rem)",fontSize:"calc(var(--Avatar-size, 2.5rem) * 0.4)"},"lg"===e.size&&{width:"var(--Avatar-size, 3rem)",height:"var(--Avatar-size, 3rem)",fontSize:"calc(var(--Avatar-size, 3rem) * 0.375)"},{marginInlineStart:"var(--Avatar-marginInlineStart)",boxShadow:"var(--Avatar-ring)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,lineHeight:1,overflow:"hidden",borderRadius:"var(--Avatar-radius, 50%)",userSelect:"none"},null==(r=t.variants[e.variant])?void 0:r[e.color])})),St=C("img",{name:"JoyAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),kt=C(mt,{name:"JoyAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"64%",height:"64%"});const jt=t.forwardRef((function(e,r){const n=T({props:e,name:"JoyAvatar"}),i=t.useContext(bt),{alt:o,color:a="neutral",size:c="md",variant:s="soft",src:l,srcSet:u,children:f,component:p,slots:d={},slotProps:v={}}=n,h=N(n,wt),y=e.variant||(null==i?void 0:i.variant)||s,m=e.color||(null==i?void 0:i.color)||a,g=e.size||(null==i?void 0:i.size)||c;let b=null;const w=E({},n,{color:m,size:g,variant:y,grouped:!!i}),O=(t=>{const{size:e,variant:r,color:n,src:i,srcSet:o}=t,a={root:["root",r&&`variant${D(r)}`,n&&`color${D(n)}`,e&&`size${D(e)}`],img:[(i||o)&&"img"],fallback:["fallback"]};return I(a,gt,{})})(w),S=E({},h,{component:p,slots:d,slotProps:v}),[k,j]=R("root",{ref:r,className:O.root,elementType:Ot,externalForwardedProps:S,ownerState:w}),[x,A]=R("img",{additionalProps:{alt:o,src:l,srcSet:u},className:O.img,elementType:St,externalForwardedProps:S,ownerState:w}),[z,C]=R("fallback",{className:O.fallback,elementType:kt,externalForwardedProps:S,ownerState:w}),B=function({crossOrigin:e,referrerPolicy:r,src:n,srcSet:i}){const[o,a]=t.useState(!1);return t.useEffect((()=>{if(!n&&!i)return;a(!1);let t=!0;const o=new Image;return o.onload=()=>{t&&a("loaded")},o.onerror=()=>{t&&a("error")},o.crossOrigin=e,o.referrerPolicy=r,n&&(o.src=n),i&&(o.srcset=i),()=>{t=!1}}),[e,r,n,i]),o}(E({},A,{src:l,srcSet:u}));return b=(l||u)&&"error"!==B?P.jsx(x,E({},A)):null!=f?f:o?o[0]:P.jsx(z,E({},C)),P.jsx(k,E({},j,{children:b}))}));export{jt as A,pt as C,F as R,vt as X,yt as Y,Y as g};
